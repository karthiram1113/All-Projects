<header class="headerStandard">
    <div class="header-top-alert marq-section bg-pink">

    </div>
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-4">
                <a class="navbar-brand" href="#"><img class="imagelogo" src="assets/images/qmc-logo-new1.png" /></a>
            </div>
        </div>
    </div>
    <nav *ngIf="!applicantdetailpage" class="navbar navbar-expand-md navbar-dark bg-pink">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" (click)="toggleDisplay()">
        <span class="navbar-toggler-icon"></span>
      </button>

            <!-- <a class="navbar-brand" href="#"><img src="assets/images/qmc-logo-new1.png"></a> -->
            <div class="collapse navbar-collapse d-none d-sm-block" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <a class="nav-link" routerLink="/home">{{ "headerSection.menu.Home" | translate }}
              </a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/about">{{
              "headerSection.menu.About" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/visa-medical-services">{{
              "headerSection.menu.Visa Medical Services" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/careers">{{
              "headerSection.menu.Careers" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/faqs">{{
              "headerSection.menu.FAQs" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/contact">{{
              "headerSection.menu.Contact" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/referrals">{{
              "headerSection.menu.Referrals" | translate
            }}</a>
                    </li>
                </ul>
            </div>
            <div class="menu-mobile d-block d-sm-none animate__animated animate__fadeInLeft" *ngIf="!isShow">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <a class="nav-link" routerLink="/home">{{ "headerSection.menu.Home" | translate
              }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/about">{{
              "headerSection.menu.About" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/visa-medical-services">{{
              "headerSection.menu.Visa Medical Services" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/careers">{{
              "headerSection.menu.Careers" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/faqs">{{
              "headerSection.menu.FAQs" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/contact">{{
              "headerSection.menu.Contact" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/referrals">{{
              "headerSection.menu.Referrals" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/checklist">
              {{ "homePage.contentTitle.Visit Checklist" | translate }}</a
            >
          </li>
          <li class="nav-item" routerLinkActive="active">
            <a class="nav-link" routerLink="/book-referral-appointment">{{
              "homePage.contentTitle.Book Referral Appointment" | translate
            }}</a>
                    </li>
                    <li class="nav-item" routerLinkActive="active">
                        <a class="nav-link" routerLink="/status-check">{{
              "homePage.contentTitle.Status Check" | translate
            }}</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="container">
    <div class="three-boxes">
        <section>
            <div class="row headers">
                <div class="col-md-12 header1">
                    <h5>Appointment History</h5>
                </div>
                <!-- <div class="col-md-6 header">
                    <h5><input class="check" type="checkbox"><span class="theme">Themed Checkbox</span></h5>
                </div> -->
            </div>

            <!-- Tab Method -->

            <!-- <div class="row appointment-btn-tab-content">
                <div class="col-md-2">
                    <button class="tab-btn tab-btn-one" >
                        <h6>REVISIT TO CENTER</h6>
                        <span class="loading-bar"></span>
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="tab-btn tab-btn-second" >
                        <h6>REVISIT TO HOSPITAL</h6>
                        <span class="loading-bar"></span>
                    </button>
                </div>
            </div> -->


            


             <!-- Tab navigation -->
             <ul class="nav nav-tabs" id="appointmentTab" role="tablist">
                <li class="nav-item" role="presentation" (click)="appointmentHistoryTab('center')">
                    <button class="nav-link active tab-btn tab-btn-one" id="center-tab" data-bs-toggle="tab" href="#center" role="tab" aria-controls="center" (click)="gethospitalreferrals()" aria-selected="true">REVISIT TO CENTER</button>
                </li>
                <li class="nav-item" role="presentation" (click)="appointmentHistoryTab('hospital')">
                    <button class="nav-link tab-btn tab-btn-second" id="hospital-tab" data-bs-toggle="tab" href="#hospital" role="tab" aria-controls="hospital" aria-selected="false">REVISIT TO HOSPITAL</button>
                </li>
            </ul>
            
            
            <div class="tab-content">
                <div class="tab-pane fade show active" id="center" role="tabpanel" aria-labelledby="center-tab">
                    <p>Details about revisiting the center...</p>
                </div>
                <div class="tab-pane fade" id="hospital" role="tabpanel" aria-labelledby="hospital-tab">
                    <p>Details about revisiting the hospital...</p>
                </div>
            </div>
            

            
            
            <div class="row cards" *ngIf="activeTab === 'center'">
                <div class="col-md-4" *ngFor="let item of data">
                    <div class="cardleft one">
                        <h6>Reasons for Revisit</h6>
                        <h5>{{item.service.name}}</h5>
                        <h6>Date & Time</h6>
                        <h5>{{ item.date_booked | date:'dd, MMMM yyyy' }} {{ item.booked_time }}</h5>
                        <h6>Booked on</h6>
                        <h5>{{ item.created_on | date:'dd, MMMM yyyy - hh:mm a' }}</h5>
                        <h6>Status</h6>
                        <h5 [ngClass]="{
                            'status-booked': item.booking_status === 1,
                            'status-cancelled': item.booking_status == 2,
                            'status-reschedule': item.booking_status == 3
                          }">
                            {{ item?.booking_status === 1 ? 'Booked' : ''|| item?.booking_status === 2 ? 'Cancelled' : '' || item?.booking_status === 3 ? 'Reschedule' : '' }}
                        </h5>
                        <!-- <h5 class="booked status">{{ item.booking_status === 1 ? 'Booked' : 'Cancel' }}</h5> -->
                        <hr>
                        <div *ngIf="item.booking_status === 1">
                            <button class="btn btn-1" data-bs-target="#reshedule" data-bs-toggle="modal" (click)="cancelAppointments(item)">Reschedule</button>
                            <button class="btn btn-2" data-bs-target="#staticBackdrop" data-bs-toggle="modal" (click)="cancelAppointments(item)">Cancel</button>
                            <button class="btn btn-1" data-bs-target="#viewdetails" data-bs-toggle="modal" (click)="selectedAppointmentDetails(item)">View Details</button>
                        </div>
                        <div *ngIf="item.booking_status === 2">
                            <button class="btn btn-1" data-bs-target="#viewdetails" data-bs-toggle="modal" (click)="selectedAppointmentDetails(item)">View Details</button>
                        </div>
                        <div *ngIf="item.booking_status === 3">
                            <button class="btn btn-1" data-bs-target="#reshedule" data-bs-toggle="modal" (click)="cancelAppointments(item)">Reschedule</button>
                            <button class="btn btn-2" data-bs-target="#staticBackdrop" data-bs-toggle="modal" (click)="cancelAppointments(item)">Cancel</button>
                            <button class="btn btn-1" data-bs-target="#viewdetails" data-bs-toggle="modal" (click)="selectedAppointmentDetails(item)">View Details</button>
                        </div>
                        <!-- <button class="btn btn-1" data-bs-target="#viewdetails" data-bs-toggle="modal" (click)="selectedAppointmentDetails(item)">View Details</button>
                        <button class="btn btn-1" data-bs-target="#reshedule" data-bs-toggle="modal" (click)="cancelAppointments(item)">Reschedule</button>
                        <button class="btn btn-2" data-bs-target="#staticBackdrop" data-bs-toggle="modal" (click)="cancelAppointments(item)">Cancel</button> -->
                    </div>
                </div>
            </div>
            <div class="row cards" *ngIf="activeTab === 'hospital'">

                <div *ngIf="!responseData || responseData.length === 0" class="no-data-message">
                    <h4>No hospital appointments available.</h4>
                  </div>

                <div class="col-md-4" *ngFor="let appointment of responseData">
                    <div class="cardleft one hospital-tab">
                        <h6>Hospital</h6>
                        <h5>{{ appointment.referral_callcenter__referral__appointment__applicant__communication__preferred_hospital__name|| 'No Hospital Info' }}</h5>
                        <h6>Appointment Date</h6>
                        <h5>{{ appointment.appointment_date || 'Not available' }}</h5>
                        <h6>Status</h6>
                        <h5 style="font-size: 16px;" [ngClass]="{
                            'status-booked': appointment.call_status === 1,
                            'status-cancelled': appointment.call_status == 2,
                            'status-reschedule': appointment.call_status == 3
                          }">
                            {{ appointment?.call_status === 1 ? 'Booked' : ''|| appointment?.call_status === 2 ? 'Cancelled' : '' || appointment?.call_status === 3 ? 'Reschedule' : '' }}
                        </h5>
                        <!-- <p>Call status: {{ appointment.call_status || 'No comments' }}</p> -->
                      </div>
                </div>
            </div>
            
          </section>
          
          
          

    </div>
</div>

<div>

    <!-- modal -->

    <!-- Cancel Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Alert</h1>
                    <button type="button" class="btn-close close-btn" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to cancel this appointment?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary no-btn" data-bs-dismiss="modal">No</button>
                    <button type="button" class="btn btn-secondary yes-btn" data-bs-toggle="modal" (click)="cancelApp()">Yes</button>
                </div>
            </div>
        </div>
    </div>



    <!-- view details model -->

    <div class="modal fade" id="viewdetails" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header sss">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Appointment Details</h1>
                    <button type="button" class="btn-close close-btn" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Reasons for Revisit</h6>
                    <h5>{{ selectedApt?.service.name }}</h5>
                    <h6>Date & Time</h6>
                    <h6>{{ selectedApt?.date_booked | date:'dd, MMMM yyyy' }} {{ selectedApt?.booked_time }}</h6>
                    <h6>Booked on</h6>
                    <h6>{{ selectedApt?.created_on | date:'dd, MMMM yyyy - hh:mm a' }}</h6>
                    <h6>Status</h6>
                    <h5 [ngClass]="{
                        'status-booked': selectedApt?.booking_status === 1,
                        'status-cancelled': selectedApt?.booking_status ===2,
                        'status-reschedule': selectedApt?.booking_status ===3,
                      }">
                        {{ selectedApt?.booking_status === 1 ? 'Booked' : '' || selectedApt?.booking_status === 2 ? 'Cancelled' : '' || selectedApt?.booking_status === 3 ? 'Reschedule' : '' }}
                    </h5>
                </div>
                <div class="modal-footer">
                    <!-- <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">view appointment history</button> -->

                </div>
            </div>
        </div>
    </div>

    <!-- Reshedule Model -->

    <div class="modal fade" id="reshedule" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Reschedule Appointment</h1>
                    <button type="button" class="btn-close close-btn" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to reschedule this appointment ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary no-btn" data-bs-dismiss="modal">No</button>
                    <button type="button" class="btn btn-secondary yes-btn" data-bs-toggle="modal" (click)="resheduleApp()">Yes</button>

                </div>
            </div>
        </div>
    </div>


    <ngx-spinner style="text-align: center;" bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-scale-multiple">
        <!-- <img style="display: block; margin: 0 auto; width: 400px; height: auto; will-change: transform;" src="assets/images/qmc-logo-new1.png" /> -->

        <!-- <p style="font-size: 20px; color: white;text-align: center">Loading Please Wait...</p> -->
    </ngx-spinner>


    <div class="mini-footer bg-pink copy-footer">
        <div class="iw-copy-right">
            <div style="padding: 10px">
                <div class="row">
                    <div class="col-md-12">
                        <div>
                            {{ "footerSection.footerAbt.Copyright Â© 2023 Stemz Healthcare. All rights reserved." | translate }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>